<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>nodejs on Simba 的喵窩</title><link>https://blog.simbafs.cc/tags/nodejs/</link><description>Recent content in nodejs on Simba 的喵窩</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 28 Feb 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.simbafs.cc/tags/nodejs/index.xml" rel="self" type="application/rss+xml"/><item><title>Strapi Quick Start</title><link>https://blog.simbafs.cc/p/js/strapi-quick-start/</link><pubDate>Sun, 28 Feb 2021 00:00:00 +0000</pubDate><guid>https://blog.simbafs.cc/p/js/strapi-quick-start/</guid><description>&lt;img src="https://blog.simbafs.cc/og/js/strapi-quick-start.png" alt="Featured image of post Strapi Quick Start" />&lt;p>strapi 是一個 headless CMS (content management system)，透過 web 介面就可以建立一個 api server&lt;/p>
&lt;h2 id="strapi">strapi&lt;/h2>
&lt;h2 id="什麼是-headless-cms">什麼是 headless CMS&lt;/h2>
&lt;p>headless CMS 顧名思義是「無頭的 內容管理系統」，意思是沒有前端、只有後端，它就是一個 DB 的 web 界面 + api server。headless CMS 專注於處理 api 的部份，前端的部份一律不關心。這對於前後端分離有很大的幫助，基本上 headless CMS 已經解決了後端 80% 的工作，剩下的就是一些客製化的邏輯，像是登入、特殊的計算等等。&lt;/p>
&lt;h2 id="strapi-的優點">strapi 的優點&lt;/h2>
&lt;ol>
&lt;li>他的界面完善&lt;/li>
&lt;li>支援多種 DB
&lt;blockquote>
&lt;p>MySQL &amp;gt;= 5.6&lt;br>
MariaDB &amp;gt;= 10.1&lt;br>
PostgreSQL &amp;gt;= 10&lt;br>
SQLite &amp;gt;= 3&lt;br>
MongoDB &amp;gt;= 3.6&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;li>存取權限控制&lt;/li>
&lt;li>外掛&lt;/li>
&lt;/ol>
&lt;h2 id="quickstart">quickstart&lt;/h2>
&lt;p>以下步驟是補充 &lt;a class="link" href="https://strapi.io/documentation/developer-docs/latest/getting-started/quick-start.html" target="_blank" rel="noopener"
>官網的 quick start&lt;/a>&lt;/p>
&lt;ol>
&lt;li>安裝&lt;br>
&lt;code>$ npx create-strapi-app my-project --quickstart; cd my-project&lt;/code>&lt;br>
這是候應該會爆出一個關於 &lt;code>knex&lt;/code> 的 dependency 的錯誤，先暫時跳過不理它&lt;/li>
&lt;li>解決 dependency 的錯誤&lt;br>
把 &lt;code>package.json&lt;/code> 裡面 &lt;code>dependencies&lt;/code> 裡面 &lt;code>knex&lt;/code> 的版本中 &lt;code>&amp;lt;&lt;/code> 拿掉，然後下 &lt;code>npm update&lt;/code> 再 &lt;code>npm start&lt;/code> 就可以了&lt;/li>
&lt;li>build&lt;br>
這時候如果你按照官網的教學 &lt;code>npm start&lt;/code> 一定會出錯，你要先 &lt;code>npm run build&lt;/code> 然後它才不會一直說找不到檔案&lt;/li>
&lt;li>建立第一個 user&lt;br>
接著它應該會自動幫你開啟一個頁面，如果沒有的話可以按&lt;a class="link" href="http://localhost:1337/admin" target="_blank" rel="noopener"
>這個連結&lt;/a>。再來我們要建立使用者，他的密碼要求特別機掰，一定要英數大小寫混合才給過，太短也不行。&lt;/li>
&lt;li>建立 &lt;code>collection type&lt;/code>&lt;br>
如果你按照官網的說法，這裡又會讓你很困惑，&lt;code>+ Create new collection type&lt;/code> 按鈕到底它ㄇ的在哪？其實只要在開啟伺服器時用 develop mode 開就可以了，這個重要要的東西它又沒寫了，把你的 server 關掉，下 &lt;code>npm run develop&lt;/code> 然後再去剛剛的頁面，重新整理就可以看到那個調皮的按鈕了。&lt;/li>
&lt;/ol>
&lt;p>再來的內容基本上沒有太多錯誤，希望官方趕快更新文件吧，這個真的害人不淺阿。&lt;/p></description></item><item><title>Node VM</title><link>https://blog.simbafs.cc/p/js/node-vm/</link><pubDate>Wed, 13 Jan 2021 00:00:00 +0000</pubDate><guid>https://blog.simbafs.cc/p/js/node-vm/</guid><description>&lt;img src="https://blog.simbafs.cc/og/js/node-vm.png" alt="Featured image of post Node VM" />&lt;h1 id="node-vm">Node VM&lt;/h1>
&lt;h2 id="nodejs-vm-模組">node.js VM 模組&lt;/h2>
&lt;p>VM 是 node.js 的核心模組，提供安全的環境 (沙箱) 來測試不信任的程式碼。&lt;/p>
&lt;h2 id="基本概念">基本概念&lt;/h2>
&lt;p>在 VM 模組裡面，有兩個基本的物件，script 和 context。script 是經過「編譯」程式，context 是給在沙箱裡面的程式碼的全域物件 (global) 。沙箱中的程式只能存取透過 context 指定的物件。&lt;/p>
&lt;h3 id="建立-script">建立 script&lt;/h3>
&lt;p>VM 模組提供 &lt;code>Script&lt;/code> 建構子，可以透過他來建立 &lt;code>Script&lt;/code> 物件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">vm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;vm&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Script&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;i++&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也可以用 &lt;code>vm.createScript&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">vm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;vm&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createScript&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;i++&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://nodejs.org/dist/latest-v14.x/docs/api/vm.html#vm_class_vm_script" target="_blank" rel="noopener"
>vm.Script&lt;/a>&lt;br>
vm.createScript 在 nodejs docs 上我沒有找到，但是我在自己的電腦上 (node v14.15.0) 測試是可以用的&lt;/p>
&lt;/blockquote>
&lt;h3 id="建立-context">建立 context&lt;/h3>
&lt;p>vm 模組沒有提供建立 context 的建構子，我們只能透過 &lt;code>vm.createContext&lt;/code> 來建立 context。&lt;br>
注意 &lt;code>vm.createContext&lt;/code> 不是 pure function，除了會回傳 context 以外，還會把傳入的物件變成 context，兩者傳入 &lt;code>vm.isContext&lt;/code> 都會回傳 &lt;code>true&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">vm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;vm&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">context1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">context2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">context1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">context1&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">context2&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 注意，其實 context1 和 context2 指向同一個物件。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">context1&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">context2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;a class="link" href="https://nodejs.org/dist/latest-v14.x/docs/api/vm.html#vm_vm_createcontext_contextobject_options" target="_blank" rel="noopener"
>vm.createContext&lt;/a>&lt;br>
&lt;a class="link" href="https://nodejs.org/dist/latest-v14.x/docs/api/vm.html#vm_vm_iscontext_object" target="_blank" rel="noopener"
>vm.isContext&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="執行-script-預先編譯-script">執行 script (預先編譯 Script)&lt;/h2>
&lt;p>最基本的函式是 &lt;code>script.runInContext&lt;/code>，它會把傳入的 context 當作 vm 的全域執行裡面的程式，&lt;em>script 的最後一個表達式的回傳值會被當作這次執行的回傳值&lt;/em>。&lt;br>
下面的範例，會把 context 中的 &lt;code>i&lt;/code> 複製一遍後回傳他的值和長度。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">vm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;vm&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createScript&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;i += i; [i, i.length]&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">context&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createContext&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;node&amp;#39;&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">runInContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">context&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [ &amp;#39;nodenode&amp;#39;, 8 ]
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果沒有事先準備 context，可以用 &lt;code>script.runInNewContext&lt;/code>，直接把還沒 &lt;a class="link" href="https://nodejs.org/dist/latest-v14.x/docs/api/vm.html#vm_what_does_it_mean_to_contextify_an_object" target="_blank" rel="noopener"
>contextify&lt;/a> 物件傳進來，這個函式會
自動建立 context。這個參數是可略的，如果沒傳物件進進來的話，context 就會是空物件。&lt;/p>
&lt;p>如果想要讓 script 直接存取全域物件的話，可以用 &lt;code>script.runInThisContext&lt;/code>。這個函式不接受 context，因為 context 就是全域 (this) 了。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">method&lt;/th>
&lt;th style="text-align:left">context&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">runInContext&lt;/td>
&lt;td style="text-align:left">contextified object&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">runInNewContext&lt;/td>
&lt;td style="text-align:left">any Object&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">runInThisContext&lt;/td>
&lt;td style="text-align:left">不用傳，this&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="執行-script-沒有預先編譯-script">執行 script (沒有預先編譯 Script)&lt;/h2>
&lt;p>如果你很懶，或是你只是想要一次行的執行這段 code，可以用 &lt;code>vm.runInContext&lt;/code>、&lt;code>vm.runInNewContext&lt;/code> 和 &lt;code>vm.runInThisContext&lt;/code>。用法跟先編譯過再執行一樣，只是其中第一個參數變成還沒編譯過的 code (String)。&lt;/p></description></item><item><title>Node Require from Project Root</title><link>https://blog.simbafs.cc/p/js/node-require-from-project-root/</link><pubDate>Wed, 02 Sep 2020 00:00:00 +0000</pubDate><guid>https://blog.simbafs.cc/p/js/node-require-from-project-root/</guid><description>&lt;img src="https://blog.simbafs.cc/og/js/node-require-from-project-root.png" alt="Featured image of post Node Require from Project Root" />&lt;h1 id="node-require-from-project-root">Node Require from Project Root&lt;/h1>
&lt;h2 id="問題">問題&lt;/h2>
&lt;p>在寫一個專案的時候，有時候會有一些小程式重複在不同的檔案裡用到，這時候我們會把他打包成模組放在 &lt;code>lib/&lt;/code>。但是如果資料夾結構有點點複雜的時候， &lt;code>require()&lt;/code> 的路徑就會很複雜：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── index.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── lib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── random.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── routes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── page
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── signup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── index.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>index.js&lt;/code> 裡面如果要引入 &lt;code>random.js&lt;/code> 就會變成這樣&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">random&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;../../lib/random.js&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="爛解法">爛解法&lt;/h2>
&lt;p>如果我們想要直接用 &lt;code>require('lib/random')&lt;/code> 的話做簡單的方式是上傳 npm，但是這樣稍嫌麻煩，而且別的專案不一定用的到。每一次修改都要上傳 npm 很不方便。&lt;/p>
&lt;h2 id="好解法">好解法&lt;/h2>
&lt;p>在 linux 裡面要把執行檔做成指令有兩個方法&lt;/p>
&lt;ol>
&lt;li>放到 &lt;code>/usr/bin&lt;/code> 之類的地方&lt;/li>
&lt;li>把這個路徑直接加到 &lt;code>PATH&lt;/code> 裡面&lt;/li>
&lt;/ol>
&lt;p>在 node 裡面也有 path 設定，&lt;code>module.paths&lt;/code>，在 require 時會去這個裡面的目路尋找檔案。所以如果要達成上述的功能的話就只要加這行就可以了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">paths&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">process&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cwd&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這樣就可以直接用 &lt;code>require('lib/random')&lt;/code> 引入了&lt;/p>
&lt;h2 id="參考資料">參考資料&lt;/h2>
&lt;p>&lt;a class="link" href="https://github.com/nodejs/node/issues/4223" target="_blank" rel="noopener"
>https://github.com/nodejs/node/issues/4223&lt;/a>&lt;br>
&lt;a class="link" href="https://github.com/nodejs/node/issues/1979" target="_blank" rel="noopener"
>https://github.com/nodejs/node/issues/1979&lt;/a>&lt;br>
&lt;a class="link" href="https://www.npmjs.com/package/rooty" target="_blank" rel="noopener"
>https://www.npmjs.com/package/rooty&lt;/a>&lt;br>
^^^&lt;br>
這個是在 github issue 裡面看到的，沒試過，但是應該也可以用吧？只是我覺得沒有 &lt;code>paths&lt;/code> 的解法來的優雅。&lt;/p></description></item></channel></rss>